<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Album - Your Favorite Stuffs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Simple Bootstrap 4 Photography template, Responsive and Modern HTML5 Template made from bootstrap 4.">
    <meta name="keywords" content="photography template, bootstrap 4 template, bootstrap 4 album template, responsive bootstrap 4 template, bootstrap 4">
    <meta name="robots" content="index, follow">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/b48bcff610.js" crossorigin="anonymous"></script>
    <style>
        body {
            padding-bottom: 70px;
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }

        .panzoom {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .panzoom img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }

        .navbar-profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .navbar-profile-pic:hover {
            transform: scale(1.1);
        }

        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 15px 0;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .bottom-bar:hover {
            background-color: #0056b3;
        }

        .bottom-bar button {
            color: white;
            background-color: transparent;
            border: 2px solid white;
            padding: 10px 20px;
            font-size: 16px;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .bottom-bar button:hover {
            background-color: white;
            color: #007bff;
            transform: scale(1.1);
        }

        #previewImageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            padding: 10px;
            min-height: 150px;
            max-height: 300px;
            overflow: hidden;
            transition: border-color 0.3s ease;
        }

        #previewImageContainer:hover {
            border-color: #007bff;
        }

        #previewImage {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }

        .card {
            transition: box-shadow 0.3s ease, transform 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transform: translateY(-5px);
        }

        .jumbotron-heading {
            transition: color 0.3s ease;
        }

        .jumbotron-heading:hover {
            color: #007bff;
        }

        .modal-content {
            transition: transform 0.3s ease;
        }

        .modal-dialog {
            transition: opacity 0.3s ease;
        }

        @media (max-width: 576px) {
            body, p, h1, h2, h3, h4, h5, h6, button {
                font-size: 90%;
            }

            .bottom-bar button {
                font-size: 14px;
            }

            .navbar-profile-pic {
                width: 30px;
                height: 30px;
            }

            .jumbotron-heading {
                font-size: 24px;
            }

            .lead {
                font-size: 14px;
            }
        }

        .album-card {
            transition: transform 0.3s ease;
        }

        .album-card:hover {
            transform: scale(1.05);
        }
    </style>
</head>

<body>
    <header id="header">
        <div class="collapse" id="navbarHeader">
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-md-7 py-4">
                        <h4>Hii Gorgeous Girl!! <i class="fa fa-heart"></i></h4>
                        <p class="text-muted">I just wanna say that I love u so much and you're the love of my life forever! Since the first time I see u I knew that you were the one who I wanna marry, have kids and spend the rest of my life with.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="navbar navbar-light box-shadow">
            <div class="container d-flex justify-content-between">
                <div class="navbar-brand d-flex align-items-center">
                    <img src="img/img1.jpg" alt="Profile" class="navbar-profile-pic">
                </div>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </div>
    </header>

    <main id="main" role="main">
        <section class="jumbotron text-center" id="mainBanner">
            <div class="container">
                <h1 class="jumbotron-heading">Welcome to your Album!</h1>
                <p class="lead text-muted">This is your album where you can save whatever you want. Photos of you, Photos of me, Photos of us. Basically, your favorite photos. Is this practical? Probably not, but it’s just a place where you can save photos of you and me and eventually share with someone that you would like to see these pictures.</p>
            </div>
        </section>

        <div class="album py-5 bg-light">
            <div class="container">
                <div class="row">
                    <div class="col-md-12" id="collection-heading">
                        <span>My Collection</span>
                    </div>
                </div>
                <div class="row" id="albumContainer">
                    <!-- Álbum será adicionado aqui dinamicamente -->
                </div>
            </div>
        </div>

        <a href="#" class="btn btn-success scrollUp" style="margin-left: 1%; margin-bottom: 2%;">
            <i class="fa-solid fa-up-long"></i>
        </a>
    </main>

    <div class="modal fade" id="addAlbumModal" tabindex="-1" role="dialog" aria-labelledby="addAlbumModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addAlbumModalLabel">Adicionar Novo Álbum</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addAlbumForm">
                        <div class="form-group">
                            <label for="albumName">Nome do Álbum</label>
                            <input type="text" class="form-control" id="albumName" name="name" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Adicionar Álbum</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addCardModal" tabindex="-1" role="dialog" aria-labelledby="addCardModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCardModalLabel">Adicionar Novo Card</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addCardForm" enctype="multipart/form-data">
                        <div id="previewImageContainer">
                            <img id="previewImage" src="" alt="Preview Image">
                        </div>
                        <div class="form-group">
                            <label for="cardImage">Imagem</label>
                            <input type="file" class="form-control-file" id="cardImage" name="image" accept="image/*" required>
                        </div>
                        <div class="form-group">
                            <label for="cardDescription">Descrição</label>
                            <textarea class="form-control" id="cardDescription" name="description" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="cardAlbum">Álbum</label>
                            <select class="form-control" id="cardAlbum" name="album" required>
                                <!-- Álbuns serão adicionados aqui dinamicamente -->
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Adicionar Card</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirmação de Exclusão</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Você tem certeza de que deseja excluir este item?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteButton">Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="imageModalTemplate" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="panzoom" id="imageContainer">
                        <img src="" id="modalImage" alt="Image">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addAlbumModal">
            <i class="fa fa-plus"></i>
        </button>
        <button type="button" class="btn btn-secondary" id="resizeAlbumsButton">Reduzir Álbuns</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/@panzoom/panzoom@9.5.0/dist/panzoom.min.js"></script>
    <script>
        $(document).ready(function() {
            function loadAlbums() {
                let albums = JSON.parse(localStorage.getItem('albums')) || [];
                $('#albumContainer').empty();
                albums.forEach(album => {
                    const albumHTML = `
                        <div class="col-md-4">
                            <div class="card album-card mb-4 shadow-sm" data-album="${album.name}">
                                <div class="card-body">
                                    <h5 class="card-title">${album.name}</h5>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="deleteAlbum('${album.name}')">Excluir Álbum</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="resizeAlbum(this)">Aumentar Álbum</button>
                                </div>
                                <div class="card-footer">
                                    <div class="row" data-album="${album.name}" id="album-${album.name}">
                                        <!-- Cards serão adicionados aqui dinamicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    $('#albumContainer').append(albumHTML);
                });
            }

            function loadCards() {
                let cards = JSON.parse(localStorage.getItem('cards')) || [];
                let albums = JSON.parse(localStorage.getItem('albums')) || [];

                cards.forEach(card => {
                    const album = albums.find(a => a.name === card.album);
                    if (album) {
                        const cardHTML = `
                            <div class="col-md-4">
                                <div class="card mb-4 shadow-sm">
                                    <img class="card-img-top" src="${card.image}" alt="Card image cap" onclick="showImage('${card.image}')">
                                    <div class="card-body">
                                        <p class="card-text">${card.description}</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" onclick="removeCard(this)">Eliminar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        $(`#album-${card.album}`).append(cardHTML);
                    }
                });
            }

            $('#addAlbumForm').on('submit', function(e) {
                e.preventDefault();
                const albumName = $('#albumName').val();
                let albums = JSON.parse(localStorage.getItem('albums')) || [];
                if (!albums.find(album => album.name === albumName)) {
                    albums.push({ name: albumName });
                    localStorage.setItem('albums', JSON.stringify(albums));
                    loadAlbums();
                    $('#addAlbumModal').modal('hide');
                }
            });

            $('#addCardForm').on('submit', function(e) {
                e.preventDefault();
                const fileInput = $('#cardImage')[0];
                const description = $('#cardDescription').val();
                const albumName = $('#cardAlbum').val();

                if (fileInput.files && fileInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const imgSrc = e.target.result;
                        const card = {
                            image: imgSrc,
                            description: description,
                            album: albumName
                        };

                        let cards = JSON.parse(localStorage.getItem('cards')) || [];
                        cards.push(card);
                        localStorage.setItem('cards', JSON.stringify(cards));

                        addCardToDOM(card);
                        $('#addCardModal').modal('hide');
                        location.reload();
                    };
                    reader.readAsDataURL(fileInput.files[0]);
                }
            });

            $('#cardImage').on('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        $('#previewImage').attr('src', e.target.result).show();
                    };
                    reader.readAsDataURL(file);
                } else {
                    $('#previewImage').hide();
                }
            });

            function addCardToDOM(card) {
                const cardHTML = `
                    <div class="col-md-4">
                        <div class="card mb-4 shadow-sm">
                            <img class="card-img-top" src="${card.image}" alt="Card image cap" onclick="showImage('${card.image}')">
                            <div class="card-body">
                                <p class="card-text">${card.description}</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="removeCard(this)">Eliminar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                $(`#album-${card.album}`).append(cardHTML);
            }

            function deleteAlbum(albumName) {
                $('#deleteConfirmationModal').modal('show');
                $('#confirmDeleteButton').off('click').on('click', function() {
                    let albums = JSON.parse(localStorage.getItem('albums')) || [];
                    albums = albums.filter(album => album.name !== albumName);
                    localStorage.setItem('albums', JSON.stringify(albums));

                    let cards = JSON.parse(localStorage.getItem('cards')) || [];
                    cards = cards.filter(card => card.album !== albumName);
                    localStorage.setItem('cards', JSON.stringify(cards));

                    loadAlbums();
                    $('#deleteConfirmationModal').modal('hide');
                });
            }

            function removeCard(button) {
                $('#deleteConfirmationModal').modal('show');
                $('#confirmDeleteButton').off('click').on('click', function() {
                    $(button).closest('.col-md-4').remove();
                    let cards = JSON.parse(localStorage.getItem('cards')) || [];
                    const imgSrc = $(// Continuando o código
                    const imgSrc = $(button).closest('.card').find('img').attr('src');
                    let cards = JSON.parse(localStorage.getItem('cards')) || [];
                    cards = cards.filter(card => card.image !== imgSrc);
                    localStorage.setItem('cards', JSON.stringify(cards));
                    $('#deleteConfirmationModal').modal('hide');
                });
            }

            function showImage(imgSrc) {
                $('#modalImage').attr('src', imgSrc);
                $('#imageModalTemplate').modal('show');
                panzoom(document.querySelector('#imageContainer'));
            }

            $('#resizeAlbumsButton').on('click', function() {
                $('.album-card').toggleClass('small');
                if ($('.album-card').hasClass('small')) {
                    $('.album-card').css({ width: '150px', height: '150px' });
                } else {
                    $('.album-card').css({ width: '300px', height: '300px' });
                }
            });

            // Carregar álbuns e cards ao iniciar
            loadAlbums();
            loadCards();
        });
    </script>
</body>

</html>